关于网络协议的学习笔记，只要根据极客时间的《趣谈网络协议》

## 小知识点

- 1.DNS：Domain Name System 网域名称系统，将域名与IP地址相互映射的数据库
- 2.`ifconfig`,`ip addr`（linux查看ip地址），`ipconfig`（windows查看ip地址）
- 3.TCP：Transmission Control Protocol 传输控制协议，是一种面向连接的协议（保证数据包能够达到目的地，否则循环发送）
- 4.子网掩码+IP地址`AND`操作算出网络号
- 5.CIDR（Classless Inter-Domain Routing，无类型域间选路）将IP分成网络号+主机号，共`32位`IP地址（根据网络号长度有A B C D E五类，常见ABC)
- 6.网络的分层形式是层层封装，高的层会包含低层的全部内容
- 7.DCHP：动态主机配置协议（Dynamic Host Configuration Protocol），为连接到网络的设备`自动配置IP`
- 8.MAC：Medium Access Control，媒体访问控制，在链路层出现，控制数据发送规则
- 9.MAC地址通常只在局域网内有效
- 10.STP（Spanning Tree Protocol，生成树协议），在`链路层`中，生成无环路的拓扑结构，保证在任意两个交换机之间只有一条链路
- 11.ICMP（Internet Control Message Protocol，互联网控制报文协议），封装在`IP`包中，有两种：ping>查询报文，traceroute>差错报文（试错）
- 12.网关：在不同协议间移动数据，与局域网同网段，拿掉原来的IP与MAC头，替换成新的PI与MAC头，发送出去
- 13.路由器：在不同网络之间移动数据，路由器上有多个网卡和网关
- 14.静态路由：在路由器上配置一些算法规则，分两种：`转发网关`（不换IP）和`NAT网关`（换IP），都保存在路由表里面
- 15.动态路由：计算数据传输的最小路径，两种算法：`距离矢量路由算法`（丢失信息需要多次发送才能发现，而且每次发送整张路由表，比较慢）和`链路状态路由算法`（只发送更新的网络拓扑，比较快，也能够迅速发现丢失信息）
- 16.UDP（User Datagram Protocol 用户数据包协议），无连接协议，可能丢包，需要`应用程序`来设置一些重连手段，多应用在对时间要求较高的场合
- 17.TCP协议的主要特点（顺序，丢包，连接维护，流量控制，拥塞控制），连接时`三次`握手（A请求、B应答、A应答上一个应答），关闭时`四次`握手（A关闭，B应答，B关闭，A应答）
- 18.socket：监听的 Socket 和真正用来传数据的 Socket 是两个，一个叫作`监听Socket`（listen函数），一个叫作`已连接 Socket`（accept函数）；以及多任务时的多进程、多线程方法
- 19.`epoll` Linux内核的可扩展I/O事件通知机制，类似中断，用来管理多项目
- 20.HTTP协议，基于TCP协议，HTTP请求包括（请求行，首部和实体），HTTP返回包括（状态行，首部和实体）
- 21.`加密`有两种方法：对称加密（只有一个密钥），非对称加密（私钥解公钥，公钥解私钥）
- 22.`数字证书`，内容包括（颁发机构>CA(Certifcate Authority，也是分好多层的机构，上面的给下面授权），颁发对象，证书期限，公钥，签名算法）
- 23.HTTPS协议：先用非对称加密传输对称加密的密钥，然后都使用对称加密来传输数据
- 24.传输`视频`时要将其编码，编码是一个`压缩`过程，传输时要分帧、分片、分网络提取层单元（NALU，Network Abstraction Layer Unit）
- 25.P2P（peer to peer），资源分散地存储在多台设备上的方式，下载时只需要找到有所需资源的机器，并在下载时成为peer中一员，需要`tracker 服务器`来中转
- 26.DHT（Distributed Hash Table）去中心化网络，每个加入这个 DHT 网络的成员，都要负责存储这个网络里的资源信息和其他成员的联系信息


## 分层

有几种分层方式，较复杂的七层：物理层，数据链路层，网络层，传输层，会话层，表示层和应用层

较简单的三层：应用层，传输层和网络层

常用5层来表示(越下层包含的东西越多）：

| 层         | 协议       |  功能           |
| ---------- | ---------- | ------------- |
| 应用层      | HTTP DNS 等| 文件传输       |
| 传输层      | TCP UDP    | 提供接口       |
| 网络层      | IP 等      | 为数据选择路由 |
| 数据链路层  | MAC        | 传输规则       |
| 物理层      |            | 数据传输       |


### 应用层

应用层包括HTTP、DNS相关操作

### 传输层

传输层有两种协议：无连接的UDP协议，以及面向连接的TCP协议，常用TCP

TCP协议中会包含用户的端口和服务器的端口


### 网络层

IP地址，MAC地址（通过ARP查询）

网关（路由器）
