# 1.使用数组中的元素值计算数组下标更新数组元素

常见于题目中给出类似：`数组长度为n，数组所有元素x满足：0<x<=n<=1000`，也就是数组元素的值小于数组长度，这样所有的数组下标都可以由数组元素表示

## 例题1

> 给定一个数组，数组长度为n,数组所有元素x满足：0<x<=n<=1000。求数组中出现次数最多的元素，若多个元素出现次数相同，输出元素值较大的，要求时间复杂度O(n),空间O(1)

```python
arr = [1,3,2,1,5,6,1,2,5,4,8,5,1]
n = len(arr)
p = 1 << 16
# 让每个位置i存储的是p的m倍，表示数字i出现了m次
for i in range(n):
    x = arr[i] % p
    arr[x] += p
    arr[i] -= x

MAX = 0
ans = 0
for i in range(n):
    print("数字",i,"在数组中出现的次数：",arr[i]//p)
    if MAX <= arr[i]//p:
        MAX = arr[i]//p
        ans = i
print("出现次数最多的数字",ans)
```
